@using Microsoft.AspNetCore.Builder
@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Options
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<SharedResource> Localizer
@inject IOptions<RequestLocalizationOptions> LocOptions

@{
    var requestCulture = Context.Features.Get<IRequestCultureFeature>();
    var currentCulture = requestCulture?.RequestCulture?.UICulture?.Name ?? "en";

    var cultureItems = new List<SelectListItem>
    {
        new SelectListItem { Value = "en", Text = "English" },
        new SelectListItem { Value = "ru", Text = "Русский" }
    };
}

<form asp-controller="Home" asp-action="SetLanguage"
      asp-route-returnUrl="@Context.Request.Path"
      method="post" class="form-horizontal d-inline-block me-2">
    <div class="input-group">
        <span class="input-group-text">
            <i class="fas fa-language me-1"></i>@Localizer["Language"]
        </span>
        <select name="culture" onchange="this.form.submit();"
                asp-for="@currentCulture"
                asp-items="cultureItems"
                class="form-select" style="width: auto;">
        </select>
    </div>
</form>